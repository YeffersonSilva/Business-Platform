<div class="d-flex flex-column flex-root">
  <div class="d-flex flex-row flex-column-fluid page">
    <app-sidebar></app-sidebar>

    <div class="d-flex flex-column flex-row-fluid wrapper" id="kt_wrapper">
      <!--begin::Header-->
      <app-top></app-top>
      <!--end::Header-->
      <!--begin::Content-->
      <div class="content d-flex flex-column flex-column-fluid" id="kt_content">
        <!--begin::Subheader-->
        <div class="subheader py-2 py-lg-4 subheader-solid" id="kt_subheader">
          <div
            class="container-fluid d-flex align-items-center justify-content-between flex-wrap flex-sm-nowrap"
          >
            <!--begin::Info-->
            <div class="d-flex align-items-center flex-wrap mr-2">
              <!--begin::Page Title-->
              <h5 class="text-dark font-weight-bold mt-2 mb-2 mr-5">
                Dashboard
              </h5>
              <!--end::Page Title-->
              <!--begin::Actions-->
              <div
                class="subheader-separator subheader-separator-ver mt-2 mb-2 mr-4 bg-gray-200"
              ></div>
              <span class="text-muted font-weight-bold mr-4">#XRS-45670</span>
              <a
                href="#"
                class="btn btn-light-warning font-weight-bolder btn-sm"
                >Add New</a
              >
              <!--end::Actions-->
            </div>
            <!--end::Info-->
          </div>
        </div>
        <!--end::Subheader-->
        <!--begin::Entry-->
        <div class="d-flex flex-column-fluid">
          <!--begin::Container-->
          <div class="container">
            <div class="d-flex flex-row">
              <!--begin::Aside-->
              <app-aside-client></app-aside-client>

              <!--end::Aside-->
              <!--begin::Content-->
              <div class="flex-row-fluid ml-lg-8">
                <!--begin::Card-->
                <div class="card card-custom">
                  <!--begin::Header-->
                  <div class="card-header py-3">
                    <div class="card-title align-items-start flex-column">
                      <h3 class="card-label font-weight-bolder text-dark">
                        Tareas del Client
                      </h3>
                      <span
                        class="text-muted font-weight-bold font-size-sm mt-1"
                        >Estadisticas del cliente</span
                      >
                    </div>
                    <div class="card-toolbar">
                      <div
                        class="btn-group"
                        role="group"
                        aria-label="Basic mixed styles example"
                      >
                        <a
                          [routerLink]="[
                            '/client/buyer/' + id + '/prospeccion'
                          ]"
                          class="btn btn-danger"
                          >Actividades</a
                        >
                        <a
                          [routerLink]="[
                            '/client/buyer/' + id + '/prospeccion/interest'
                          ]"
                          class="btn btn-warning"
                          >Intereses</a
                        >
                        <a
                          [routerLink]="[
                            '/client/buyer/' + id + '/prospeccion/call'
                          ]"
                          class="btn btn-success"
                          >Llamadas</a
                        >
                        <a
                          [routerLink]="[
                            '/client/buyer/' + id + '/prospeccion/email'
                          ]"
                          class="btn btn-info"
                          >Email</a
                        >
                        <a
                          [routerLink]="[
                            '/client/buyer/' + id + '/prospeccion/task'
                          ]"
                          class="btn btn-dark"
                          >Tareas</a
                        >
                      </div>
                    </div>
                  </div>
                  <!--end::Header-->
                  <!--begin::Form-->
                  <div class="card-header">
                    <div class="card-toolbar">
                      <a
                        *ngIf="!loadData"
                        class="btn btn-info font-weight-bolder font-size-sm mr-3"
                        style="cursor: pointer"
                        data-toggle="modal"
                        [attr.data-target]="'#modalTarea'"
                      >
                        Nueva tarea
                      </a>
                      <button
                        *ngIf="loadData"
                        disabled
                        class="btn btn-info font-weight-bolder font-size-sm mr-3"
                      >
                        Nueva tarea
                      </button>

                      <div
                        class="modal fade"
                        id="modalTarea"
                        tabindex="-1"
                        role="dialog"
                        aria-labelledby="exampleModalLabel"
                        style="display: none"
                        aria-hidden="true"
                      >
                        <div
                          class="modal-dialog modal-dialog-centered"
                          role="document"
                        >
                          <div class="modal-content">
                            <div class="modal-header">
                              <h5 class="modal-title" id="exampleModalLabel">
                                Nueva tarea
                              </h5>
                              <button
                                type="button"
                                class="close"
                                data-dismiss="modal"
                                aria-label="Close"
                              >
                                <i aria-hidden="true" class="ki ki-close"></i>
                              </button>
                            </div>
                            <div class="card-body">
                              <h3
                                class="font-size-lg text-dark font-weight-bold mb-6"
                              >
                                1. General:
                              </h3>
                              <div class="mb-15">
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Asesor a cargo (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <select

                                      class="form-control"
                                      name="asesor"
                                      [(ngModel)]="task.asesor"
                                    >
                                      <option value="" selected disabled>
                                        Seleccionar
                                      </option>
                                      <option [value]="item._id" *ngFor="let item of asesor">{{item.fullname}} </option>
                                    </select>
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Tarea (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <input
                                      type="text"
                                      class="form-control"
                                      name="tarea"
                                      placeholder="Llamar a cliente"
                                      [(ngModel)]="task.task"
                                    />
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Acci√≥n (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <input min="{{dates}}"
                                      type="date"
                                      class="form-control"
                                      name="date"
                                      [(ngModel)]="task.date"
                                    />
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Hora (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <ngb-timepicker [(ngModel)]="time"></ngb-timepicker>
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Tipo (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <select

                                      class="form-control"
                                      name="type"
                                      [(ngModel)]="task.type"
                                    >
                                      <option value="" selected disabled>
                                        Seleccionar
                                      </option>
                                      <option value="Llamada">Llamada</option>
                                      <option value="Correo">Correo</option>
                                      <option value="Venta">Venta</option>
                                      <option value="Otro">Otro</option>
                                    </select>
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <label class="col-lg-4 col-form-label"
                                    ><b>Prioridad (*):</b></label
                                  >
                                  <div class="col-lg-8">
                                    <select

                                      class="form-control"
                                      name="priority"
                                      [(ngModel)]="task.priority"
                                    >
                                      <option value="" selected disabled>
                                        Seleccionar
                                      </option>
                                      <option value="Ninguna">Ninguna</option>
                                      <option value="Alta">Alta</option>
                                    </select>
                                  </div>
                                </div>
                                <div class="form-group row">
                                  <div class="col-lg-12">
                                    <textarea
                                      class="form-control"
                                      rows="3"
                                      placeholder="Alguna nota o informaci√≥n"
                                        name="note"
                                      [(ngModel)]="task.note"
                                    ></textarea>
                                  </div>
                                </div>
                              </div>
                            </div>
                            <div class="modal-footer">
                              <button
                                type="button"
                                class="btn btn-light-primary font-weight-bold"
                                data-dismiss="modal"
                              >
                                Cerrar
                              </button>
                              <button
                                type="button"
                                class="btn btn-primary font-weight-bold"
                                (click)="registerTask()"
                                *ngIf="!btnTask"
                              >
                                Crear
                              </button>
                              <button *ngIf="btnTask" type="button" class="btn btn-primary font-weight-bold spinner spinner-white spinner-left">
                                                Creando
                                            </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="card-body">
                    <div class="row mt-5 mb-6" *ngIf="loadData">
                      <div class="col-12 text-center">
                        <div
                          class="spinner-border"
                          style="width: 3rem; height: 3rem"
                          role="status"
                        >
                          <span class="sr-only">Loading...</span>
                        </div>
                      </div>
                    </div>
                    <div class="row" *ngIf="!loadData">
                      <div class="col-12" *ngIf="data">
                        <div class="table-responsive">
                          <table
                            class="table table-borderless table-vertical-center"
                          >
                            <thead>
                              <tr>
                                <th class="p-0" style="width: 50px"></th>
                                <th class="p-0" style="min-width: 200px"></th>
                                <th class="p-0" style="min-width: 120px"></th>
                                <th class="p-0" style="min-width: 120px"></th>
                                <th class="p-0" style="min-width: 160px"></th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td class="p-0 py-4">
                                  <!-- ESTADO == FALSE -->
                                  <div
                                    class="symbol symbol-50 symbol-light mr-5"
                                  >
                                    <span class="symbol-label">
                                      <!-- <i class="flaticon-notepad text-primary icon-lg"></i> -->
                                      <!-- VENTA -->
                                      <!-- <i class="flaticon-email text-primary icon-lg"></i> -->
                                      <!-- CORREO -->
                                      <i
                                        class="flaticon2-phone text-primary icon-lg"
                                      ></i>
                                      <!-- LLAMADA -->
                                    </span>
                                  </div>
                                  <!-- ESTADO == TRUE -->
                                  <!-- <div class="symbol symbol-50 symbol-light mr-5">
                          <span class="symbol-label" style="background-color: #3699ff;">
                              <i class="flaticon2-check-mark text-white icon-lg"></i>
                          </span>
                      </div> -->
                                </td>
                                <td class="pl-0">
                                  <a
                                    class="text-dark-75 font-weight-bolder text-hover-primary mb-1 font-size-lg"
                                  >
                                    Llamar al cliente para cierre venta
                                  </a>
                                  <div>
                                    <span class="font-weight-bolder"
                                      >Tipo de tarea:</span
                                    >
                                    <a
                                      class="text-muted font-weight-bold text-hover-primary"
                                      >&nbsp; Llamada</a
                                    >
                                  </div>
                                </td>
                                <td class="text-right">
                                  <span
                                    class="text-dark-75 font-weight-bolder d-block font-size-lg"
                                  >
                                    <!-- ASESOR -->
                                    Diego Alonso Arroyo
                                  </span>
                                  <!-- <span class="text-dark-75 font-weight-bolder d-block font-size-lg">
                         No asignado
                      </span> -->
                                  <span class="text-muted font-weight-bold"
                                    >Asesor</span
                                  >
                                </td>

                                <td class="text-right">
                                  <!-- PRIORIDAD -->
                                  <span
                                    style="cursor: pointer"
                                    class="label label-lg label-light-danger label-inline"
                                  >
                                    Alta
                                  </span>
                                  <!-- <span style="cursor: pointer;" class="label label-lg label-light-primary label-inline">
                          Ninguna
                      </span> -->
                                </td>
                                <td class="pr-0 text-right">
                                  <span
                                    class="text-dark-75 font-weight-bolder d-block font-size-lg"
                                  >
                                    23/01/2022
                                  </span>
                                  <span class="text-muted font-weight-bold"
                                    ><b>Hora:</b> 07:21</span
                                  >
                                </td>
                              </tr>
                              <tr>
                                <td colspan="5" class="font-weight-bolder">
                                  <!-- NOTA -->
                                  <p>
                                    Lorem ipsum, dolor sit amet consectetur
                                    adipisicing elit. Unde, minus esse corrupti
                                    itaque possimus porro ipsum dolores quo
                                    omnis consequatur sunt. Optio quos veritatis
                                    magnam recusandae quam aut sapiente
                                    assumenda.
                                  </p>

                                  <!-- MARCAR ENVIO -->
                                  <!-- <a style="cursor: pointer;" class="text-success" data-toggle="modal">[Marcar como hecho]</a> -->

                                  <!-- ENVIO MARCADO -->
                                  <a class="text-primary">
                                    <i
                                      class="flaticon-user text-primary mr-3"
                                    ></i>
                                    Marcado por Diego Alonso Arroyo
                                  </a>

                                  <div
                                    class="separator separator-dashed mt-8 mb-5"
                                  ></div>

                                  <div
                                    class="modal fade"
                                    tabindex="-1"
                                    role="dialog"
                                    aria-labelledby="exampleModalLabel"
                                    aria-hidden="true"
                                  >
                                    <div class="modal-dialog" role="document">
                                      <div class="modal-content">
                                        <div class="modal-header">
                                          <h5
                                            class="modal-title"
                                            id="exampleModalLabel"
                                          >
                                            Realizaci√≥n de tarea
                                          </h5>
                                          <button
                                            type="button"
                                            class="close"
                                            data-dismiss="modal"
                                            aria-label="Close"
                                          >
                                            <i
                                              aria-hidden="true"
                                              class="ki ki-close"
                                            ></i>
                                          </button>
                                        </div>
                                        <div class="modal-body">
                                          <p>
                                            Al aceptar esta marcando la
                                            realicaci√≥n de la tarea con su
                                            cuenta.
                                          </p>
                                        </div>
                                        <div class="modal-footer">
                                          <button
                                            type="button"
                                            class="btn btn-warning font-weight-bold"
                                            data-dismiss="modal"
                                          >
                                            Cerrar
                                          </button>
                                          <button
                                            type="button"
                                            class="btn btn-success font-weight-bold"
                                          >
                                            Marcar
                                          </button>

                                          <!-- <button class="btn btn-success" type="button" disabled>
                                          <span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>
                                          Marcando...
                                        </button> -->
                                        </div>
                                      </div>
                                    </div>
                                  </div>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <ng-container *ngIf="!data">
                        <app-notfound></app-notfound>
                      </ng-container>

                    </div>

                  </div>
                  <!--end::Form-->
                </div>
              </div>
              <!--end::Content-->
            </div>
            <!--begin::Dashboard-->
            <!--begin::Row-->
            <div class="row"></div>
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <!--end::Entry-->
      </div>
      <!--end::Content-->
    </div>
  </div>
</div>
